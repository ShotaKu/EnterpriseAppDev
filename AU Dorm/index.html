<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-app.js"></script>
    <script type="text/javascript" src="myScript.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Ravi+Prakash" rel="stylesheet">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Real Estate - Free CSS Template</title>
    <meta name="keywords" content="free css templates, real estate website, website templates, W3C, CSS, XHTML" />
    <meta name="description" content="Real Estate Template - Free CSS Template, W3C compliant XHTML CSS layout" />
    <link href="templatemo_style.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="gallery_style.css" />
</head>
<body>
    <!--ここからヘッダー-->
<div id="templatemo_container">
<div id="templatemo_top_panel">
	<div id="templatemo_header_section">
        <!--ここタイトル-->
		<div id="templatemo_header">
        	AU DORM
        </div>
    </div> <!-- end of header section -->
    
    <div id="templatemo_menu_login_section">
    	<div id="templatemo_menu_section">
        	<div id="templatemo_menu_panel">
                <!-- ここメニュー -->
                <ul>
                    <li><a href="index.html" class="current">Home</a></li>
                    <li><a href="subpage.html">Dorm List</a></li>
                    <li><a href="#">Student</a></li>
                    <li><a href="#">Owners</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Contact</a></li>                   
                </ul> 
            </div> <!-- end of menu -->
        </div>
        <!--ここログインセッション-->
        <div id="templatemo_login_section">
        	<form method="get" action="#">
                <label>Owner ID:</label><input type="text" name="email" class="input_field" />
                <label>Password:</label><input type="password" name="password" class="input_field" />
                <input type="submit" value="Login" name="submit" class="submit_btn" />
            </form>
        </div>
    </div> <!-- end of menu login section -->
</div> <!-- end of top panel -->

<div id="templatemo_gallery_panel">
<div id="gallery">
  <div id="imagearea">
    <div id="image">
        <!--ここから小さい画像リストを大きく表示するところ-->
      <a href="javascript:slideShow.nav(-1)" class="imgnav " id="previmg"></a>
      <a href="javascript:slideShow.nav(1)" class="imgnav " id="nextimg"></a>
    </div>
  </div>
  <div id="thumbwrapper">
    <div id="thumbarea">
      <ul id="thumbs">
          <!--ここから小さい画像リスト-->
        <li value="1"><img id="showcase1" src="images/loading.gif" width="179" height="100" alt="" /></li>
        <li value="2"><img id="showcase2" src="images/loading.gif" width="179" height="100" alt="" /></li>
        <li value="3"><img id="showcase3" src="images/loading.gif" width="179" height="100" alt="" /></li>
        <li value="4"><img id="showcase4" src="images/loading.gif" width="179" height="100" alt="" /></li>
        <li value="5"><img id="showcase5" src="images/loading.gif" width="179" height="100" alt="" /></li>
        <li value="3"><img id="showcase6" src="images/loading.gif" width="179" height="100" alt="" /></li>
        <li value="4"><img id="showcase7" src="images/loading.gif" width="179" height="100" alt="" /></li>
        <li value="5"><img id="showcase8" src="images/loading.gif" width="179" height="100" alt="" /></li>
      </ul>
    </div>
  </div>
</div>

<script type="text/javascript">
var imgid = 'image';
var imgdir = 'images/fullsize';
var imgext = '.jpg';
var thumbid = 'thumbs';
var auto = true;
var autodelay = 5;
</script>
<script type="text/javascript" src="slide.js"></script>

</div>

<div id="templatemo_content_panel_1">

	<div id="templatemo_news_section">
    	<h1>About this site</h1>
        <div class="templatemo_news_box">
        	<h3>Dormitory Catalog for AU students</h3>
            <p>This website is created for Assumption University student to choose their best dormitory. You can search dormitory and check available room of each dormitory at this website.  </p>
      </div>
      
    </div><!-- end of news section -->
    <div id="templatemo_section_1_1">
    	<h1>Find a room</h1>
        <form method="get" action="#">
        	<div class="left_column">
                <!-- <div class="form_row"> <label>Dormitory name: </label><input type="text" name="country" value="" /> </div> -->
                <div class="form_row"> <label>Dormitory name: </label>
                	<select name="state">
                        <option>Unspecified</option>
                        <option>Assumption University</option>
                        </select>
                </div>
                <div class="form_row">
                        <label>Price: </label>
                        <select name="min_price">
                            <option>minimum</option>
                            <option>฿2000/Mon</option>
                            <option>฿2500/Mon</option>
                            <option>฿3000/Mon</option>
                            <option>฿3500/Mon</option>
                            <option>฿4000/Mon</option>
                        </select>
                        <label>To: </label>
                        <select name="max-price">
                            <option>maximum</option>
                            <option>฿2000/Mon</option>
                            <option>฿2500/Mon</option>
                            <option>฿3000/Mon</option>
                            <option>฿3500/Mon</option>
                            <option>฿4000/Mon</option>
                        </select>
                   </div>
                <!-- <div class="form_row"> <label>Zip / Postal code </label><input type="text" name="country" value="" /> </div> -->
            </div>
            <div class="right_column">
	                
               	<div class="form_row"> <label>The other option 1: </label>
                	<select name="option1">
                            <option>Unspecified</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                    </select>
                </div>
                <div class="form_row"> <label>The other option 2: </label>
                	<select name="option1">
                            <option>Unspecified</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                    </select>
                </div>
                <div class="form_row"> <label>The other option 3: </label>
                	<select name="option1">
                        <option>Unspecified</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                    </select>
                </div>
                <div class="form_row"> 
                	<input type="submit" value="Submit" name="submit" class="submit_btn_02" />
                </div>
            </div>
            
        </form>
    </div><!-- end of section 1 -->
    <div class="cleaner_with_height">&nbsp;</div>
</div>

<div id="templatemo_content_panel_2">
	<div class="templatemo_section_2">
    
    	
        <img id="dormImage1" src="images/loading.gif" alt="image" width="200" height="150"/>
        <h4 id = "dormName1">null</h4>
        <p id = "dormDetail1">null</p>
        <div class="price">PRICE:<span id="dormPrice1"> $1,234,000</span></div>    
        <div class="readmore"><a href="subpage.html">Read more</a></div>                       
    </div>
    <div class="templatemo_section_2">
        <img id="dormImage2" src="images/loading.gif" alt="image" width="200" height="150"/>
        <h4 id= "dormName2">null</h4>
        <p id = "dormDetail2">null</p>
        <div class="price">PRICE:<span> $876,000</span></div>                           
        <div class="readmore"><a href="subpage.html">Read more</a></div>
    </div>
    <div class="templatemo_section_2">

        <img id="dormImage3" src="images/loading.gif" alt="image" width="200" height="150"/>
        <h4 id= "dormName3">null</h4>
        <p id = "dormDetail3">null</p>
        <div class="price">PRICE:<span> $2,468,000</span></div>                           
      <div class="readmore"><a href="subpage.html">Read more</a></div>
    </div>
    
    <div class="cleaner_with_height">&nbsp;</div>
</div> <!-- end of content panel 2 -->

<div id="templatemo_content_panel_3">

	<div class="templatemo_quick_contact">
    	<h1>Quick Contact</h1>
        <p>
            Tel: 010-100-1000<br />
            Fax: 020-200-2000<br />
            Email: info {at} templatemo.com
        </p>
        <a href="http://validator.w3.org/check?uri=referer"><img style="border:0;width:88px;height:31px" src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Transitional" width="88" height="31" vspace="8" border="0" /></a>
<a href="http://jigsaw.w3.org/css-validator/check/referer"><img style="border:0;width:88px;height:31px"  src="http://jigsaw.w3.org/css-validator/images/vcss-blue" alt="Valid CSS!" vspace="8" border="0" /></a> 
    </div><!-- end of news section 3-->
    
   <div class="templatemo_section_3">
    	<h1>Helpful Links</h1>
        	<ul class="list_section">
                <li><a href="#">Testimonials</a></li>
                <li><a href="#">FAQs</a></li>
                <li><a href="#">Terms of us</a></li>
                <li><a href="#">About Us</a></li>
                <li><a href="#">Contact Us</a></li>
            </ul>
    </div>
    <div class="templatemo_section_3">
    	<h1>Partner Links</h1>
        	<ul class="list_section">
                <li><a href="http://www.flashmo.com" target="_blank">Free Flash</a></li>
                <li><a href="http://www.templatemo.com" target="_blank">Free CSS</a></li>
                <li><a href="http://www.webdesignmo.com" target="_blank">Web Design</a></li>
                <li><a href="http://www.photovaco.com" target="_blank">Free Photos</a></li>
            </ul>
    </div>
    
<div class="cleaner_with_height">&nbsp;</div>
</div><!-- end of content panel 3 -->

<div id="templatemo_footer_panel">
    Copyright © 2048 <a href="index.html">Your Company Name</a> | <a href="http://www.iwebsitetemplate.com" target="_parent">Website Templates</a> by <a href="http://www.templatemo.com" target="_blank">Free CSS Templates</a></div>
</div> <!-- 一番最後 -->
<!-- <div align=center>This template  downloaded form <a href='http://all-free-download.com/free-website-templates/'>free website templates</a></div>-->
</body> 

<script src="https://www.gstatic.com/firebasejs/5.3.1/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyBO3AHVZG4mF5WvJvVfX-RcWrNceWku5u4",
    authDomain: "audorm-c6dae.firebaseapp.com",
    databaseURL: "https://audorm-c6dae.firebaseio.com",
    projectId: "audorm-c6dae",
    storageBucket: "audorm-c6dae.appspot.com",
    //messagingSenderId: "715848706924"
  };
  firebase.initializeApp(config);
var database = firebase.database();
// alert(firebase.app().name);
var dataRef = database.ref('Dormitory');
var showCaseRef = database.ref('Showcase');
showCaseRef.once("value").then(function(snapshot)
{
    var im = 1;
    console.log("Start load images:"+ snapshot.key);
    snapshot.forEach(function(childSnapshot) {
        if(im<=7)
        {
            var imageURL = childSnapshot.val();
            console.log((im-1)+":"+imageURL);
            document.getElementById("showcase"+im).src = imageURL;
        }
        im++;
    });
})
dataRef.once("value")
    .then(function(snapshot){
        var i = 0;
        var dormID = 0;
        snapshot.forEach(function(childSnapshot) {
            dormID = childSnapshot.key;
            if(i<3)
            {
                console.log("Dorm "+dormID);   
                childSnapshot.forEach(function(childSnapshot){
                    var key = childSnapshot.key;
                    var val = childSnapshot.val();
                    console.log("Ｌ"+childSnapshot.key + ":" + val);
                    if(key == "name"){
                        document.getElementById("dormName"+(i+1)).innerHTML = val;
                    }
                    else if(key == "thumbnail"){
                        document.getElementById("dormImage"+(i+1)).src = val;
                    }
                    else if(key == "detail"){
                        document.getElementById("dormDetail"+(i+1)).innerHTML = val;
                    }
                    else if(key == "rooms"){
                        console.log("Ｌrooms");
                        var avgPrice = 0;
                        var available = 0;
                        childSnapshot.forEach(function(childSnapshot){
                            console.log("  ＬRoom Number:"+childSnapshot.key);
                            childSnapshot.forEach(function(childSnapshot){
                                var key = childSnapshot.key;
                                var val = childSnapshot.val();
                                if(key == "price"){
                                    avgPrice += val;
                                }
                                else if(key == "isAvailable"){
                                    if(val == "true"){
                                        available++;
                                    }
                                }
                                console.log("   Ｌ"+key + ":" + val);
                            });
                        });
                        if(avgPrice != 0){
                            document.getElementById("dormPrice"+(i+1)).innerHTML = " "+avgPrice+"Baht";
                        }
                    }
            });
            i++;
            }
        });
    })
</script>
</html>